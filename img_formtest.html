$def with(form)

<!DOCTYPE html>
<html>
<head>

	<meta charset="utf-8">

	<link rel="shortcut icon" href="../favicon.ico"> 
	<link rel="stylesheet" type="text/css" href="css/default.css" />
	<link rel="stylesheet" type="text/css" href="css/component.css" />
	<link rel="stylesheet" type="text/css" href="css/component1.css" />
	<script src="js/modernizr.custom.js"></script>
	<script src="js/modernizr-custom.js"></script>
	<script type="text/javascript" src="js/lrscroll.js"></script>
	<style type="text/css">
		body {  
    		margin: 0;  
    		background-image: url('bg2.jpg') ; 
			background-size:100%;
   			background-repeat:repeat;  
			}   

	</style>
	<title>搜索引擎——图片</title> 
	<script type="text/javascript">
    function imgPreview(fileDom){
        //判断是否支持FileReader
        if (window.FileReader) {
            var reader = new FileReader();
        } else {
            alert("您的设备不支持图片预览功能，如需该功能请升级您的设备");
        }

        //获取文件
        var file = fileDom.files[0];
        var imageType = /^image\//;
        //是否是图片
        if (!imageType.test(file.type)) {
            alert("请选择图片格式文件");
            return;
        }
        //读取完成
        reader.onload = function(e) {
            //获取图片dom
            var img = document.getElementById("preview");
            //图片路径设置为读取的图片
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }
		function upload() {
        var xhr = new XMLHttpRequest();
        var progress = document.getElementById("progress")
        progress.style.display = "block";

        xhr.upload.addEventListener("progress", function(e) {
            if (e.lengthComputable) {
                var percentage = Math.round((e.loaded * 100) / e.total);
                progress.value = percentage;
            }
        }, false);

        xhr.upload.addEventListener("load", function(e){
              console.log("上传完毕...")
          }, false);

        xhr.open("POST", "upload");
        xhr.overrideMimeType('text/plain; charset=x-user-defined-binary');
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4 && xhr.status == 200) {
                alert(xhr.responseText); // handle response.
                progress.style.display = "none";
                progress.value = 0;
            }
        };
        var file = document.getElementById("imgFile");
        var fd = new FormData();
        fd.append(file.files[0].name, file.files[0]);
        xhr.send(fd);
    }
</script>
</head>
<body>
	<nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" id="cbp-spmenu-s1">
			<div class="menu__wrap">
				<ul data-menu="main" class="menu__level" tabindex="-1" role="menu" aria-label="All">
					<li class="menu__item" role="menuitem"><a class="menu__link" href="#">&nbsp名称Name</a></li>
					<li class="menu__item" role="menuitem"><a class="menu__link" href="#">&nbsp品牌Brand</a></li>
					<li class="menu__item" role="menuitem"><a class="menu__link" href="#">&nbsp调香师Designer</a></li>
					<li class="menu__item" role="menuitem"><a class="menu__link" data-submenu="submenu-4" aria-owns="submenu-4" href="#">&nbsp气味Scent</a></li>
					<li class="menu__item" role="menuitem"><a class="menu__link" href="#">&nbsp香调Notes</a></li>
				</ul>
				<!-- Submenu 1 -->
				<ul data-menu="submenu-4" id="submenu-4" class="menu__level" tabindex="-1" role="menu" aria-label="Vegetables">
					<li class="menu__item" role="menuitem"><a class="menu__link" href="#">&nbsp前调Head Notes</a></li>
					<li class="menu__item" role="menuitem"><a class="menu__link" href="#">&nbsp中调Heart Notes</a></li>
					<li class="menu__item" role="menuitem"><a class="menu__link" href="#">&nbsp后调Base Notes</a></li>
					<li class="menu__item" role="menuitem"><a class="menu__link" href="#">&nbsp混合搜索Cross Search</a></li>				
				</ul>
			</div>
			</nav>




	
	<div class="container">
		<header class="clearfix">
			<span>香水</span>
			<h1>搜索引擎</h1>
			<nav>
				<a id="showLeft" class="icon-arrow-left" data-info="Menu">Show Menu</a>
			</nav>
		</header>
		<div class="main" style="margin-top: 100px;">
			<section>
				<!-- Class "cbp-spmenu-open" gets applied to menu -->

				<button><a href="/">网页</a></button>
				<button><a class="active" href="/im">图片</a></button>
				
				<form action="/i" method="GET">
    				<input type="file" name="file" style="color:#000000;border: thick;width: 1000px;font-size: 16;background-color:#343434;opacity: 0.5;padding: 12px;" onchange="imgPreview(this)" />

    				<input type="submit" class="bx" name="Search" onClick="upload()" value="搜索图片" style="margin-top: 100px;margin-left: auto;"/>
    				<img style="max-width: 100%;max-height: 400px;margin: 10px;margin-left: -3px;" id="preview" />
				</form>
				
			</section>				
		</div>
	
	</div>
	<script src="js/classie.js"></script>
	<script src="js/main.js"></script>
	<script>
			var menuLeft = document.getElementById( 'cbp-spmenu-s1' ),
				showLeft = document.getElementById( 'showLeft' ),
				body = document.body,
				mlmenu = new MLMenu(menuLeft, {
				// breadcrumbsCtrl : true, // show breadcrumbs
				// initialBreadcrumb : 'all', // initial breadcrumb text
				backCtrl : false, // show back button
				// itemsDelayInterval : 60, // delay between each menu item sliding animation
				//onItemClick: loadDummyData // callback: item that doesn´t have a submenu gets clicked - onItemClick([event], [inner HTML of the clicked item])
			});

			showLeft.onclick = function() {
				classie.toggle( this, 'active' );
				classie.toggle( menuLeft, 'cbp-spmenu-open' );
				disableOther( 'showLeft' );
			};

			function disableOther( button ) {
				if( button !== 'showLeft' ) {
					classie.toggle( showLeft, 'disabled' );
				}
				if( button !== 'showRight' ) {
					classie.toggle( showRight, 'disabled' );
				}
			}
		</script>
</body>


</html>